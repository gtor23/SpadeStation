(this.webpackJsonpspades_shopper=this.webpackJsonpspades_shopper||[]).push([[0],{31:function(e,t,r){},64:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r(32),c=r.n(a),s=r(12),i=r(2),u=r.n(i),o=r(3),l=r(4),p=r(5),j=r.n(p),b=r(8),d=r(6),h=r(0);var f=function(e){return Object(h.jsxs)("div",{className:"Home",children:[Object(h.jsxs)("div",{className:"bigwelcome",children:[Object(h.jsx)("div",{className:"welcoming",children:Object(h.jsx)("h1",{children:"Welcome to SPADE STATION!"})}),Object(h.jsx)("div",{className:"welcoming2",children:Object(h.jsx)("h1",{children:"We've Got Games On Deck!"})})]}),Object(h.jsx)("div",{id:"slideshow",children:Object(h.jsxs)("div",{className:"slide-wrapper",children:[Object(h.jsx)("div",{className:"slide",children:Object(h.jsx)("div",{className:"slide-img",children:Object(h.jsx)("img",{src:"/icons/banner1.jpg",alt:"banner1"})})}),Object(h.jsx)("div",{className:"slide",children:Object(h.jsx)("div",{className:"slide-img",children:Object(h.jsx)("img",{src:"/icons/banner2.jpg",alt:"banner2"})})}),Object(h.jsx)("div",{className:"slide",children:Object(h.jsx)("div",{className:"slide-img",children:Object(h.jsx)("img",{src:"/icons/banner3.jpg",alt:"banner3"})})}),Object(h.jsx)("div",{className:"slide",children:Object(h.jsx)("div",{className:"slide-img",children:Object(h.jsx)("img",{src:"/icons/banner4.jpg",alt:"banner4"})})}),Object(h.jsx)("div",{className:"slide",children:Object(h.jsx)("div",{className:"slide-img",children:"5"})})]})}),Object(h.jsxs)("p",{className:"line1",children:[Object(h.jsx)("img",{src:"/icons/action.jpg",alt:"action"}),Object(h.jsx)("img",{src:"/icons/rpg.jpg",alt:"rpg"}),Object(h.jsx)("img",{src:"/icons/platformer.jpg",alt:"paltformer"}),Object(h.jsx)("img",{src:"/icons/strat.jpg",alt:"strat"})]})]})};function O(){var e=localStorage.getItem("token");return e?{headers:{Authorization:"Bearer ".concat(e)}}:{}}function m(){return x.apply(this,arguments)}function x(){return(x=Object(o.a)(u.a.mark((function e(){var t,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.a.get("/api/users/me",O());case 3:return t=e.sent,r=t.data,e.abrupt("return",r);case 8:return e.prev=8,e.t0=e.catch(0),console.log("checkLogin(): User is not logged on.\n",e.t0),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function g(e,t){return v.apply(this,arguments)}function v(){return(v=Object(o.a)(u.a.mark((function e(t,r){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:n=e.sent,console.log("User:",n),n.id?r(n):t.history.push("/login");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e,t){return y.apply(this,arguments)}function y(){return(y=Object(o.a)(u.a.mark((function e(t,r){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.a.post("/api/users/login",{username:t,password:r});case 3:return n=e.sent,(a=n.data).token&&S(a.token),e.abrupt("return",a);case 9:return e.prev=9,e.t0=e.catch(0),console.error("login(): Unable to login.\n",e.t0),e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function k(e,t){return C.apply(this,arguments)}function C(){return(C=Object(o.a)(u.a.mark((function e(t,r){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.a.post("/api/users/register",{username:t,password:r});case 3:return n=e.sent,(a=n.data).token&&S(a.token),e.abrupt("return",a);case 9:return e.prev=9,e.t0=e.catch(0),console.error("register(): Unable to register user.\n",e.t0),e.abrupt("return",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function S(e){localStorage.setItem("token",e)}function N(e,t){return T.apply(this,arguments)}function T(){return(T=Object(o.a)(u.a.mark((function e(t,r){var n,a,c,s,i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.filter((function(e){return"CART"===e.orderStatus})),a=localStorage.getItem("token"),n.length){e.next=9;break}return e.next=5,j()({method:"post",url:"/api/orders",data:{buyerId:t},headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}});case 5:return c=e.sent,(s=c.data).games=[],e.abrupt("return",s);case 9:return e.next=11,j.a.get("/api/order_games/".concat(n[0].id),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}});case 11:return i=e.sent,o=i.data,n[0].games=o,e.abrupt("return",n[0]);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var A=function(e){var t=Object(n.useState)({}),r=Object(l.a)(t,2),a=r[0],c=r[1];return Object(n.useEffect)((function(){g(e,c),window.console.log(e.user)}),[]),Object(h.jsx)("div",{className:"landing",children:Object(h.jsxs)("h1",{children:["Welcome, ",a.username,"! Thanks for logging in! Buy some games, will ya?"]})})};var G=Object(d.g)((function(e){var t=e.user,r=e.setUser,n=e.setCartGames,a=e.history,c=e.cartView,i=e.setCartView,u=e.setCart;return Object(h.jsxs)("div",{children:[Object(h.jsx)("h1",{className:"logo",children:Object(h.jsx)("img",{src:"/icons/logo.png",alt:"logo"})}),Object(h.jsxs)("nav",{className:"navbar",children:[Object(h.jsx)(s.b,{to:"/",children:Object(h.jsx)("img",{src:"/icons/home.png",alt:"home"})}),Object(h.jsx)(s.b,{to:"/games",children:Object(h.jsx)("img",{src:"/icons/games.png",alt:"games"})}),Object(h.jsx)("input",{type:"image",src:"/icons/cart.png",onClick:function(e){e.preventDefault(),i(!c)}}),t.id?Object(h.jsxs)("div",{children:[Object(h.jsx)(s.b,{to:"/account",children:Object(h.jsx)("img",{src:"/icons/profile.png",alt:"profile"})}),Object(h.jsx)("a",{href:"#",onClick:function(){localStorage.removeItem("token"),n([]),i(!1),u({}),r({}),a.push("/")},children:Object(h.jsx)("img",{src:"/icons/signout.png",alt:"signout"})})]}):Object(h.jsxs)("div",{children:[Object(h.jsx)(s.b,{to:"/login",children:Object(h.jsx)("img",{src:"/icons/login.png",alt:"login"})}),Object(h.jsx)(s.b,{to:"/signup",children:Object(h.jsx)("img",{src:"/icons/register.png",alt:"register"})})]})]})]})}));var I=function(e){var t=e.type,r=e.setUser,a=Object(n.useState)(""),c=Object(l.a)(a,2),s=c[0],i=c[1],p=Object(n.useState)(""),j=Object(l.a)(p,2),b=j[0],d=j[1];function f(){return(f=Object(o.a)(u.a.mark((function n(a){var c;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a.preventDefault(),s&&b){n.next=5;break}return n.abrupt("return");case 5:if(n.prev=5,"login"!==t){n.next=12;break}return n.next=9,w(s,b);case 9:n.t0=n.sent,n.next=15;break;case 12:return n.next=14,k(s,b);case 14:n.t0=n.sent;case 15:if(!(c=n.t0).user){n.next=24;break}return n.next=19,i("");case 19:return n.next=21,d("");case 21:return n.next=23,r(c.user);case 23:e.history.push("/landing");case 24:n.next=29;break;case 26:n.prev=26,n.t1=n.catch(5),console.log(n.t1);case 29:case"end":return n.stop()}}),n,null,[[5,26]])})))).apply(this,arguments)}return Object(h.jsxs)("form",{className:"AuthForm",onSubmit:function(e){return f.apply(this,arguments)},children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{htmlFor:"username",children:"Username:"}),Object(h.jsx)("input",{id:"username",value:s,type:"text",placeholder:"Type your username",onChange:function(e){return i(e.target.value)}})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{htmlFor:"password",children:"Password:"}),Object(h.jsx)("input",{id:"password",value:b,type:"text",placeholder:"Type your password",onChange:function(e){return d(e.target.value)}})]}),Object(h.jsx)("button",{type:"submit",children:"login"===t?"Login":"Register"})]})},E=function(e){var t=e.user,r=e.setUser,a=Object(n.useState)(""),c=Object(l.a)(a,2),s=c[0],i=c[1];return Object(n.useEffect)((function(){t.id||e.history.push("/"),g(e,r),i(t.username)}),[]),Object(h.jsxs)("div",{className:"profilepage",children:[Object(h.jsx)("img",{src:"/icons/you.jpg",alt:"you"}),Object(h.jsxs)("div",{className:"userinfo",children:[Object(h.jsx)("h1",{children:"Look At YOU!"}),Object(h.jsxs)("h2",{children:["Username: ",s]})]})]})},U=function(e){var t=e.game,r=t.id,n=t.title,a=(t.description,t.price,t.console,t.year,t.image);return Object(h.jsxs)("div",{className:"game-icon",children:[Object(h.jsx)("input",{type:"image",src:a,alt:"space invaders",onClick:function(){event.preventDefault(),e.history.push("/games/".concat(r))},width:"190",height:"275"}),Object(h.jsx)("h1",{children:n})]})},q=function(){var e=Object(n.useState)(""),t=Object(l.a)(e,2),r=t[0],a=t[1],c=Object(n.useState)(""),s=Object(l.a)(c,2),i=s[0],p=s[1],b=Object(n.useState)(""),d=Object(l.a)(b,2),f=d[0],O=d[1],m=Object(n.useState)(""),x=Object(l.a)(m,2),g=x[0],v=x[1],w=Object(n.useState)(""),y=Object(l.a)(w,2),k=y[0],C=y[1],S=Object(n.useState)(""),N=Object(l.a)(S,2),T=N[0],A=N[1],G=localStorage.getItem("token");function I(){return(I=Object(o.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j()({method:"POST",url:"/api/games",data:{title:r,description:i,price:f,console:g,year:k,image:T},headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(G)}});case 3:t=e.sent,t.data,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),window.console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return Object(h.jsxs)("div",{id:"new-game",children:[Object(h.jsx)("h1",{children:"Create New Game"}),Object(h.jsxs)("form",{id:"new-game-form",onSubmit:function(e){e.preventDefault(),function(){I.apply(this,arguments)}()},children:[Object(h.jsx)("input",{type:"text",value:r,onChange:function(){var e=Object(o.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a(t.target.value));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),placeholder:"Title",required:!0}),Object(h.jsx)("input",{type:"text",value:i,onChange:function(){var e=Object(o.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p(t.target.value));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),placeholder:"Description",required:!0}),Object(h.jsx)("input",{type:"text",value:f,onChange:function(){var e=Object(o.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O(t.target.value));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),placeholder:"Price",required:!0}),Object(h.jsx)("input",{type:"text",value:g,onChange:function(){var e=Object(o.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v(t.target.value));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),placeholder:"Console",required:!0}),Object(h.jsx)("input",{type:"text",value:k,onChange:function(){var e=Object(o.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",C(t.target.value));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),placeholder:"Year",required:!0}),Object(h.jsx)("input",{type:"text",value:T,onChange:function(){var e=Object(o.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",A(t.target.value));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),placeholder:"Image",required:!0}),Object(h.jsx)("input",{type:"submit",id:"submit-button"})]})]})};function P(e){return V.apply(this,arguments)}function V(){return(V=Object(o.a)(u.a.mark((function e(t){var r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.a.get("/api/games/");case 3:r=e.sent,n=r.data,t(n),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}var D=function(e){var t=e.user,r=Object(n.useState)([]),a=Object(l.a)(r,2),c=a[0],s=a[1];Object(n.useEffect)((function(){function e(){return(e=Object(o.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:P(s);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var i=c.map((function(t,r){if(t.available)return Object(n.createElement)(U,Object(b.a)(Object(b.a)({},e),{},{key:r,game:t}))}));return Object(h.jsxs)("div",{className:"games",children:[Object(h.jsx)("h1",{className:"gamesheader",children:"List of Games"}),"admin"===t.username?Object(h.jsx)(q,{}):null,Object(h.jsx)("div",{className:"gamegrid",children:i})]})},B=function(e){var t=e.game,r=(e.editing,Object(d.f)().gameId),a=Object(n.useState)(""),c=Object(l.a)(a,2),s=c[0],i=c[1],p=Object(n.useState)(""),b=Object(l.a)(p,2),f=b[0],O=b[1],m=Object(n.useState)(""),x=Object(l.a)(m,2),g=x[0],v=x[1],w=Object(n.useState)(""),y=Object(l.a)(w,2),k=y[0],C=y[1],S=Object(n.useState)(""),N=Object(l.a)(S,2),T=N[0],A=N[1],G=Object(n.useState)(""),I=Object(l.a)(G,2),E=I[0],U=I[1];Object(n.useEffect)((function(){i(t.title),O(t.description),v(t.price),C(t.console),A(t.year),U(t.image)}),[]);var q=localStorage.getItem("token");function P(){return(P=Object(o.a)(u.a.mark((function e(t){var n,a,c,s,i,o,p,b,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),window.console.log(t.target[0].value),n=Object(l.a)(t.target,6),a=n[0],c=n[1],s=n[2],i=n[3],o=n[4],p=n[5],e.prev=3,e.next=6,j()({method:"PATCH",url:"/api/games/".concat(r),data:{title:a.value,description:c.value,price:s.value,console:i.value,year:o.value,image:p.value},headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(q)}});case 6:b=e.sent,d=b.data,window.console.log("Updated game:",d),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),window.console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[3,11]])})))).apply(this,arguments)}return Object(h.jsxs)("form",{className:"game-labels",onSubmit:function(e){return function(e){return P.apply(this,arguments)}(e)},children:[Object(h.jsx)("input",{type:"text",value:s,onChange:function(){var e=Object(o.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i(t.target.value));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),placeholder:"Title",required:!0}),Object(h.jsx)("input",{type:"text",value:f,onChange:function(){var e=Object(o.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",O(t.target.value));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),placeholder:"Description",required:!0}),Object(h.jsx)("input",{type:"text",value:g,onChange:function(){var e=Object(o.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v(t.target.value));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),placeholder:"Price",required:!0}),Object(h.jsx)("input",{type:"text",value:k,onChange:function(){var e=Object(o.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",C(t.target.value));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),placeholder:"Console",required:!0}),Object(h.jsx)("input",{type:"text",value:T,onChange:function(){var e=Object(o.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",A(t.target.value));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),placeholder:"Year",required:!0}),Object(h.jsx)("input",{type:"text",value:E,onChange:function(){var e=Object(o.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",U(t.target.value));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),placeholder:"Image",required:!0}),Object(h.jsx)("button",{type:"submit",children:"Save Changes"})]})},z=r(34),H=localStorage.getItem("token");function L(){return(L=Object(o.a)(u.a.mark((function e(t,r,n,a,c){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(event.preventDefault(),a||c(!0),r.filter((function(e){return e.id===t.id})).length){e.next=11;break}if(!H){e.next=7;break}return e.next=7,j()({method:"POST",url:"/api/order_games/",data:{gameId:t.id},headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(H)}});case 7:t.quantity=1,n([].concat(Object(z.a)(r),[t])),e.next=12;break;case 11:return e.abrupt("return");case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e,t,r,n){return F.apply(this,arguments)}function F(){return(F=Object(o.a)(u.a.mark((function e(t,r,n,a){var c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=r.filter((function(e){return e.id!==t.id})),!H){e.next=7;break}return e.next=4,j()({method:"DELETE",url:"/api/order_games/".concat(a.id),data:{gameId:t.id},headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(H)}});case 4:n(c),e.next=8;break;case 7:n(c);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){return(J=Object(o.a)(u.a.mark((function e(t,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!H){e.next=9;break}return e.prev=1,e.next=4,j()({method:"DELETE",url:"/api/order_games/".concat(r.id,"/all"),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(H)}});case 4:e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(1),e.t0;case 9:t([]);case 10:case"end":return e.stop()}}),e,null,[[1,6]])})))).apply(this,arguments)}function R(){return(R=Object(o.a)(u.a.mark((function e(t,r,n,a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!H){e.next=9;break}return e.prev=1,e.next=4,j()({method:"PATCH",url:"/api/order_games/".concat(r.id),data:{gameId:t.id,quantity:n+1},headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(H)}});case 4:e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(1),e.t0;case 9:a(n+1);case 10:case"end":return e.stop()}}),e,null,[[1,6]])})))).apply(this,arguments)}function W(){return(W=Object(o.a)(u.a.mark((function e(t,r,n,a,c,s){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==c){e.next=2;break}return e.abrupt("return",_(t,r,n,a));case 2:if(!H){e.next=11;break}return e.prev=3,e.next=6,j()({method:"PATCH",url:"/api/order_games/".concat(a.id),data:{gameId:t.id,quantity:c-1},headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(H)}});case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(3),e.t0;case 11:s(c-1);case 12:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}var Y=function(e){var t=e.game,r=e.cartGames,a=e.setCartGames,c=e.cart,s=(t.id,t.title),i=(t.description,t.console,t.year,t.price),u=(t.image,t.quantity),o=Object(n.useState)(u),p=Object(l.a)(o,2),j=p[0],b=p[1];return Object(h.jsxs)("div",{className:"cart-item",children:[Object(h.jsx)("img",{src:t.image,width:"30",height:"30"}),Object(h.jsx)("a",{children:s}),Object(h.jsxs)("a",{children:["$",i]}),Object(h.jsxs)("a",{children:["Copies: ",j]}),Object(h.jsx)("button",{type:"button",onClick:function(){return function(e,t,r,n,a,c){return W.apply(this,arguments)}(t,r,a,c,j,b)},children:"-"}),Object(h.jsx)("button",{type:"button",onClick:function(){return function(e,t,r,n){return R.apply(this,arguments)}(t,c,j,b)},children:"+"}),Object(h.jsx)("button",{type:"button",onClick:function(){return _(t,r,a,c)},children:"Remove"})]})};r(31);function $(){return($=Object(o.a)(u.a.mark((function e(t,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.length){e.next=2;break}return e.abrupt("return");case 2:r(!1),location.assign("/checkout");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var M=function(e){var t=e.cartGames,r=e.setCartGames,n=e.cart,a=(e.total,e.setTotal,e.cartView),c=e.setCartView,s=t.map((function(e,a){return Object(h.jsx)(Y,{game:e,cartGames:t,setCartGames:r,cart:n},a)}));return Object(h.jsxs)("div",{id:"cart",className:a?"show":"hide",children:[Object(h.jsx)("h2",{children:"Cart"}),s.length?s:Object(h.jsx)("a",{children:"Cart Is Empty"}),Object(h.jsx)("button",{type:"button",onClick:function(){return function(e,t){return J.apply(this,arguments)}(r,n)},children:"Clear Cart"}),Object(h.jsx)("button",{type:"button",onClick:function(){return function(e,t){return $.apply(this,arguments)}(t,c)},children:"Checkout"})]})},K=function(e){var t=e.game,r=t.title,n=t.price,a=t.image,c=t.quantity;return Object(h.jsxs)("div",{className:"cart-item",children:[Object(h.jsx)("img",{src:a,width:"30",height:"30"}),Object(h.jsx)("a",{children:r}),Object(h.jsxs)("a",{children:["$",n]}),Object(h.jsxs)("a",{children:["Copies: ",c]})]})},Q=function(e){var t=e.orderId,r=e.cartGames,a=e.setCartGames,c=e.cart,s=e.user,i=Object(n.useState)(null),p=Object(l.a)(i,2),b=p[0],d=p[1],f=Object(n.useState)(""),O=Object(l.a)(f,2),m=O[0],x=O[1],g=Object(n.useState)({}),v=Object(l.a)(g,2),w=v[0],y=v[1],k=Object(n.useState)(!1),C=Object(l.a)(k,2),S=C[0],N=C[1],T=localStorage.getItem("token"),A=function(){var e=Object(o.a)(u.a.mark((function e(){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(event.preventDefault(),s.id){e.next=3;break}return e.abrupt("return",location.assign("/login"));case 3:if(r.length){e.next=5;break}return e.abrupt("return",location.assign("/"));case 5:return e.prev=5,e.next=8,j()({method:"PATCH",url:"/api/checkout/".concat(t),data:{payment:b,shippingLoc:m},headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(T)}});case 8:n=e.sent,a=n.data,y(a),N(!0),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(5),window.console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[5,14]])})));return function(){return e.apply(this,arguments)}}(),G=r.map((function(e,t){return Object(h.jsx)(Y,{game:e,cartGames:r,setCartGames:a,cart:c},t)})),I=r.map((function(e,t){return Object(h.jsx)(K,{game:e},t)}));return Object(h.jsxs)("div",{className:"checkout",children:[Object(h.jsx)("div",{className:"chform",children:Object(h.jsxs)("form",{className:"formpay",onSubmit:function(){return A(G)},children:[Object(h.jsx)("h1",{children:"Checkout"}),Object(h.jsx)("div",{className:"thecartlist",children:G}),Object(h.jsx)("label",{className:"loc1",children:" Shipping Address: "}),Object(h.jsx)("div",{className:"toship",children:Object(h.jsx)("input",{type:"text",className:"location1",value:m,onChange:function(e){return x(e.target.value)},required:!0})}),Object(h.jsxs)("select",{className:"dropdown",onChange:function(e){return d(e.target.value)},required:!0,children:[Object(h.jsx)("option",{children:"Select Payment"}),["VISA","MasterCard","Discover","AmEx","Apple Pay","GPay","PayPal","Venmo"].map((function(e,t){return Object(h.jsx)("option",{value:e,children:e},t)}))]}),Object(h.jsx)("button",{type:"submit",className:"ordersubmit",children:" Submit "}),Object(h.jsx)("button",{type:"button",onClick:function(){location.assign("/")},children:"Cancel"})]})}),Object(h.jsx)("div",{id:"confirmation",className:S?"show":"hide",children:Object(h.jsxs)("form",{children:[Object(h.jsxs)("h2",{children:["Order Id: ",w.id," "]}),Object(h.jsxs)("h2",{children:["Payment: ",w.payment]}),Object(h.jsxs)("h2",{children:["Shipping To: ",w.shippingLoc]}),Object(h.jsx)("h2",{children:"Order Contents: "}),I,Object(h.jsx)("button",{type:"button",onClick:function(){return location.assign("/")},children:"Home"})]})})]})};function X(e,t){return Z.apply(this,arguments)}function Z(){return(Z=Object(o.a)(u.a.mark((function e(t,r){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.a.get("/api/games/".concat(t));case 3:n=e.sent,a=n.data,r(a),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function ee(){return(ee=Object(o.a)(u.a.mark((function e(t,r){var n,a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=localStorage.getItem("token"),e.prev=2,e.next=5,j()({method:"PATCH",url:"/api/games/".concat(r),data:{available:!1},headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}});case 5:a=e.sent,c=a.data,window.console.log("Updated game:",c),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),window.console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}var te=function(e){var t=e.user,r=e.cartGames,a=e.setCartGames,c=(e.cart,e.cartView),s=e.setCartView,i=Object(d.f)().gameId,p=Object(n.useState)({}),j=Object(l.a)(p,2),b=j[0],f=j[1],O=Object(n.useState)(!1),m=Object(l.a)(O,2),x=m[0],g=m[1];Object(n.useEffect)((function(){function e(){return(e=Object(o.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:X(i,f);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);b.id;var v=b.title,w=b.description,y=(b.console,b.year),k=b.price,C=b.image;return Object(h.jsxs)("div",{id:"game-info",children:[x?Object(h.jsx)(B,{game:b}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{id:"game-details",children:[Object(h.jsxs)("h2",{id:"game-title",children:["Title: ",v]}),Object(h.jsxs)("h3",{id:"game-release",children:["Released: ",y]}),Object(h.jsxs)("h3",{id:"game-desc",children:["About: ",w]}),Object(h.jsxs)("h3",{id:"game-price",children:["Price: ",k]})]}),Object(h.jsx)("img",{id:"game-box",src:C,width:"800",height:"425"})]}),Object(h.jsx)("button",{onClick:function(){return function(e,t,r,n,a){return L.apply(this,arguments)}(b,r,a,c,s)},children:"Add to Cart"}),"admin"===t.username?Object(h.jsx)("button",{onClick:function(e){e.preventDefault(),g(!0)},children:"Edit"}):null,"admin"===t.username?Object(h.jsx)("button",{onClick:function(e){return function(e,t){return ee.apply(this,arguments)}(e,i)},children:"Sold Out"}):null]})},re=function(e){var t=e.user,r=t.id,n=t.username,a=t.isActive;return Object(h.jsxs)("div",{className:"user-card",children:[Object(h.jsxs)("h1",{children:["Name: ",n]}),Object(h.jsxs)("h2",{children:["ID# ",r]}),Object(h.jsxs)("h2",{children:["Active: ",a?"True":"False"]})]})};function ne(e){return ae.apply(this,arguments)}function ae(){return(ae=Object(o.a)(u.a.mark((function e(t){var r,n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=localStorage.getItem("token"),e.prev=1,e.next=4,j()({method:"GET",url:"/api/users/all",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)}});case 4:n=e.sent,a=n.data,window.console.log("Users:",a),t(a),e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(1),e.t0;case 13:case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}var ce=function(e){var t=e.user,r=Object(n.useState)([]),a=Object(l.a)(r,2),c=a[0],s=a[1];Object(n.useEffect)((function(){function r(){return(r=Object(o.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ne(s);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}"admin"!==t.username&&e.history.push("/Home"),function(){r.apply(this,arguments)}()}),[]);var i=c.map((function(e,t){return Object(h.jsx)(re,{user:e},t)}));return Object(h.jsxs)("div",{id:"users-list",children:[Object(h.jsx)("h1",{children:"Users"}),i]})};var se=Object(d.g)((function(e){var t=e.user,r=e.setUser,n=e.cartGames,a=e.setCartGames,c=e.cart,s=e.cartView,i=e.setCartView;return Object(h.jsxs)(d.c,{children:[Object(h.jsx)(d.a,{path:"/login",render:function(e){return Object(h.jsx)(I,Object(b.a)(Object(b.a)({type:"login"},e),{},{setUser:r}))}}),Object(h.jsx)(d.a,{path:"/signup",render:function(e){return Object(h.jsx)(I,Object(b.a)(Object(b.a)({type:"register"},e),{},{setUser:r}))}}),Object(h.jsx)(d.a,{path:"/account",render:function(e){return Object(h.jsx)(E,Object(b.a)(Object(b.a)({},e),{},{user:t,setUser:r}))}}),Object(h.jsx)(d.a,{path:"/users",render:function(e){return Object(h.jsx)(ce,Object(b.a)(Object(b.a)({},e),{},{user:t,setUser:r}))}}),Object(h.jsx)(d.a,{path:"/games/:gameId",render:function(e){return Object(h.jsx)(te,Object(b.a)(Object(b.a)({},e),{},{user:t,cartGames:n,setCartGames:a,cart:c,cartView:s,setCartView:i}))}}),Object(h.jsx)(d.a,{path:"/games",render:function(e){return Object(h.jsx)(D,Object(b.a)(Object(b.a)({},e),{},{user:t}))}}),Object(h.jsx)(d.a,{path:"/checkout",render:function(e){return Object(h.jsx)(Q,Object(b.a)(Object(b.a)({},e),{},{user:t,orderId:c.id,cartGames:n,setCartGames:a,cart:c}))}}),Object(h.jsx)(d.a,{path:"/landing",component:A}),Object(h.jsx)(d.a,{path:"/",component:f})]})}));var ie=function(){var e=Object(n.useState)({}),t=Object(l.a)(e,2),r=t[0],a=t[1],c=Object(n.useState)(!1),s=Object(l.a)(c,2),i=s[0],p=s[1],b=Object(n.useState)({}),d=Object(l.a)(b,2),f=d[0],O=d[1],x=Object(n.useState)([]),g=Object(l.a)(x,2),v=g[0],w=g[1],y=Object(n.useState)(0),k=Object(l.a)(y,2),C=k[0],S=k[1],T=Object(n.useState)(!1),A=Object(l.a)(T,2),I=(A[0],A[1]);return Object(n.useEffect)((function(){(function(){var e=Object(o.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:(t=e.sent).id&&a(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()(),r.id||w(JSON.parse(localStorage.getItem("guestcart"))||[])}),[]),Object(n.useEffect)((function(){r.id&&function(){var e=Object(o.a)(u.a.mark((function e(t){var r,n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("/api/orders/".concat(t));case 2:return r=e.sent,n=r.data,e.next=6,N(t,n);case 6:a=e.sent,O(a),w(a.games),window.console.log("Cart:",a);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r.id)}),[r]),Object(n.useEffect)((function(){r.id||localStorage.setItem("guestcart",JSON.stringify(v))}),[v]),Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)(G,{user:r,setUser:a,setCartGames:w,cartView:i,setCartView:p,setCart:O}),Object(h.jsx)(M,{cartGames:v,setCartGames:w,cart:f,total:C,setTotal:S,cartView:i,setCartView:p,setShowCheckout:I}),Object(h.jsx)(se,{user:r,setUser:a,cartGames:v,setCartGames:w,cart:f,cartView:i,setCartView:p})]})};c.a.render(Object(h.jsx)(s.a,{children:Object(h.jsx)(ie,{})}),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.c2c18f25.chunk.js.map